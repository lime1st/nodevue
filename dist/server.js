(()=>{var e={611:(e,o,s)=>{const t=s(983);s(776),e.exports=class{constructor(e){this.pool=e}execute(e){t.using(this.pool.connect(),(o=>{e(o)}))}executeTx(e){t.using(this.pool.connect(),(o=>{o.beginTransaction((s=>{e(o)}))}))}}},776:(e,o,s)=>{const t=s(744),r=s(837),n=s(983);n.promisifyAll(t),n.promisifyAll(s(624).prototype),n.promisifyAll(s(817).prototype);const i={host:"49.50.162.185",user:"mydeal",password:"Seungtaki09!2",database:"mydealdb",multipleStatements:!0,connectionLimit:5,waitForConnections:!1};e.exports=class{constructor(e){e=e||i,this.pool=t.createPool(e)}connect(){return this.pool.getConnectionAsync().disposer((e=>e.release()))}end(){this.pool.end((function(e){r.log(">>>>>>>>>>>>>> End of Pool!"),e&&r.log("ERR pool ending!!")}))}}},983:e=>{"use strict";e.exports=require("bluebird")},632:e=>{"use strict";e.exports=require("ejs")},860:e=>{"use strict";e.exports=require("express")},299:e=>{"use strict";e.exports=require("hashmap")},744:e=>{"use strict";e.exports=require("mysql")},624:e=>{"use strict";e.exports=require("mysql/lib/Connection")},817:e=>{"use strict";e.exports=require("mysql/lib/Pool")},952:e=>{"use strict";e.exports=require("socket.io")},685:e=>{"use strict";e.exports=require("http")},837:e=>{"use strict";e.exports=require("util")},44:e=>{"use strict";e.exports=JSON.parse('{"id":123,"name":"hong"}')}},o={};function s(t){var r=o[t];if(void 0!==r)return r.exports;var n=o[t]={exports:{}};return e[t](n,n.exports,s),n.exports}(()=>{const e=s(860),o=e(),t=s(685).createServer(o),{Server:r}=s(952),n=new r(t,{log:!1,origins:"*.*",pingInterval:3e3,pingTimeout:5e3}),i=s(837),c=s(776),u=s(611),l=s(44),{uid:a}=s(299),m=new c;o.use(e.static("public")),o.set("views",__dirname+"/views"),o.set("view engine","ejs"),o.engine("html",s(632).renderFile),o.get("/",((e,o)=>{o.render("index",{name:"홍길동"})})),o.get("/test/:email",((e,o)=>{l.email=e.params.email,l.aa=e.query.aa,o.json(l)})),o.get("/dbtest/:user",((e,o)=>{let s=e.params.user;new u(m).execute((e=>{e.query("select * from users where uid=?",[s],((e,s)=>{o.json(s)}))}))})),t.listen(7101,(()=>{console.log("Express's started on port 7101")})),n.on("connection",((e,o)=>{e.emit("message",{msg:"Welcome "+e.id}),i.log("connection>>",e.id,e.handshake.query),e.on("join",(function(o,s){e.join(o),i.log("Join >>",o,JSON.stringify([...e.rooms])),s&&s()})),e.on("leave",(function(o,s){e.leave(o),s&&s()})),e.on("rooms",(function(o){o&&o(JSON.stringify([...e.rooms]))})),e.on("message",((o,s)=>{i.log("message 서버>>",o.msg,o.room,e.rooms),s&&s(o.msg),e.broadcast.to(o.room).emit("message",{room:o.room,msg:o.msg})})),e.on("message-for-one",((o,s,t)=>{e.to(o).emit("message",{msg:s})})),e.on("disconnecting",(function(o){i.log("disconnecting>>",e.id,e.rooms)})),e.on("disconnect",(function(o){i.log("disconnect>>",e.id,e.rooms)}))}))})()})();